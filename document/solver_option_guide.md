# Solver Option Guide

## How to Set Solver Option
The options of the cppmh solver can be set by a `cppmh::solver::Option` object. The following code shows an example of setting the options `verbose` and `tabu_search.iteration_max` to  `Full` and 10000, respectively.
```c++
cppmh::model::IPModel model;

/// The modeling code is omitted.

cppmh::solver::Option option;
option.verbose = cppmh::solver::Full;
option.tabu_search.iteration_max = 10000;

/// The option object is set as the 2nd argument of cppmh::solver::solve().
auto result = cppmh::solver::solve(&model, option);

```

## List of Options
### Global Options

| Name                                      |                 Type                 |               Default               | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
|:------------------------------------------|:------------------------------------:|:-----------------------------------:|:------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `iteration_max`                           |                `int`                 |                `10`                 | Allowed maximum number of outer loop iterations.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| `time_max`                                |               `double`               |                `120`                | Allowed maximum computational time for optimization calculation.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| `penalty_coefficient_relaxing_ratio`      |               `double`               |                `0.5`                | If the augmented objective incumbent obtained by a tabu search is feasible, all penalty coefficients will be relaxed by the multiplying `penalty_coefficient_relaxing_ratio`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `penalty_coefficient_relaxing_ratio`      |               `double`               |                `1.0`                | If the augmented objective incumbent obtained by a tabu search is not feasible, penalty coefficients corresponding violative constraints will be tightened by the adding violation multiplied by `penalty_coefficient_relaxing_ratio`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| `initial_penalty_coefficient`             |               `double`               |                `1E6`                | Initial penalty coefficient value. The penalty coefficients corresponding to all constraints are initialized by `initial_penalty_coefficient`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `is_enabled_local_search`                 |                `bool`                |               `true`                | If this option is set true, the initial solution will be improved by a naive local search employing first-admissible move strategy.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| `is_enabled_grouping_penalty_coefficient` |                `bool`                |               `false`               | If this option is set true, the penalty coefficients for constraints belonging to the same constraint group are aligned to the largest one in the group. Here, "constraint groups" are constraints which share common symbol and are distinguished by their indices.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| `is_enabled_initial_value_correction`     |                `bool`                |               `true`                | If this option is set true, cppmh tries to correct initial value of decision variables necessarily so that they satisfy ther lower and upper bounds and so on.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `is_enabled_parallel_evaluation`          |                `bool`                |               `true`                | If this option is set `true`, evaluations of neighborhood solutions will be parallelized using [OpenMP](https://www.openmp.org).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| `is_enabled_parallel_neighborhood_update` |                `bool`                |               `true`                | If this option is set `true`, updating the neighborhood of the current solution will be parallelized using [OpenMP](https://www.openmp.org).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `selection_mode`                          | `SelectionMode`<br/>(`cppmh::model`) |               `None`                | Rule to detect and extract selection constraints. <br/> `None`: No selection constraints will be extracted. <br /> `Defined`: If a decision variable is included in more than one selection constraints, the selection constraint defined at first will extracted in priority. <br /> `Smaller`: If a decision variable is included in more than one selection constraints, the selection constraint with the smaller number of decision variables will extracted in priority. <br /> `Larger`: If a decision variable is included in more than one selection constraints, the selection constraint with the larger number of decision variables will extracted in priority. <br /> `Independent` Selection constraints that do not share decision variables with each other will be extracted. |
| `target_objective`                        |               `double`               | `1E100` <br/>or `-1E100` <br/> or 0 | Target objective function value. If the objective the function of the feasible incumbent reaches `target_objective` , optimization calculation will be terminated. For minimization problems and maximization problems, -1E100 and 1E100 will be set as default values, respectively. If the objective function is not defined, the target will be set 0 and the optimization will be terminated if a feasible solution is found.                                                                                                                                                                                                                                                                                                                                                               |
| `verbose`                                 |  `Verbose` <br />(`cppmh::Solver`)   |               `None`                | Log level of standard output. <br /> `None`: No output. <br /> `Warn`: Output only warning messages. <br /> `Outer`: Output warning messages and outer loop intermediate results. <br /> `Full`: Output full information.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |

### Local Search Options
| Name                                |   Type   | Default | Description                                                                                                                   |
|:------------------------------------|:--------:|:-------:|:------------------------------------------------------------------------------------------------------------------------------|
| `local_search`<br/>`.iteration_max` |  `int`   | `10000` | Allowed maximum number of the local search loop iterations.                                                                   |
| `local_search`<br/>`.time_max`      | `double` |  `120`  | Allowed maximum computational time for local search.                                                                          |
| `local_search`<br/>`.log_interval`  | `double` |  `10`   | Iteration interval to print the calculation log to standard output. This option is effective only if `verbose` is set `Full`. |
| `local_search`<br/>`.seed`          |  `int`   |   `1`   | Random seed.                                                                                                                  |


### Tabu Search Options
| Name                                                             |               Type               | Default | Description                                                                                                                                                                                                                                                                                                                                                                   |
|:-----------------------------------------------------------------|:--------------------------------:|:-------:|:------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `tabu_search`<br/>`.iteration_max`                               |              `int`               |  `200`  | Allowed maximum number of one tabu search loop iterations.                                                                                                                                                                                                                                                                                                                    |
| `tabu_search`<br/>`.time_max`                                    |             `double`             |  `120`  | Allowed maximum computational time for one tabu search.                                                                                                                                                                                                                                                                                                                       |
| `tabu_search`<br/>`.log_interval`                                |             `double`             |  `10`   | Iteration interval to print the calculation log to standard output. This option is effective only if `verbose` is set `Full`.                                                                                                                                                                                                                                                 |
| `tabu_search`<br/>`.initial_tabu_tenure`                         |              `int`               |  `10`   | Initial tabu tenure. The value of a decision variable can not be changed again until the number of tabu tenure iterations has passed.                                                                                                                                                                                                                                         |
| `tabu_search`<br/>`.tabu_mode`                                   | `TabuMode`<br/>(`cppmh::solver`) |  `All`  | Rule to determine the acceptability (tabu or not) of a move from the current solution to a neighborhood solution for the case that the move consists of multiple variable changes.  <br /> `Any`: The move is not acceptable if any variable includes in the move is "tabu". <br/> `All`: The move is not acceptable if all of the variables included in the move are "tabu". |
| `tabu_search`<br/>`.move_preserve_rate`                          |             `double`             |  `1.0`  | Preserve rate of moves when the number of moves will be curtailed. The option is effective only if `is_enabled_move_curtail` is set `true`.                                                                                                                                                                                                                                   |
| `tabu_search`<br/>`.frequency_penalty_coefficient`               |             `double`             | `1E-5`  | Coefficient to penalize moves which change frequently updated variables.                                                                                                                                                                                                                                                                                                      |
| `tabu_search`<br/>`.is_enabled_improvability_screening`          |              `bool`              | `true`  | If this option is set `true`, moves with no improvement in the objective function or constraint violation will be set lower priorities in selecting a move for the next solution.                                                                                                                                                                                             |
| `tabu_search`<br/>`.is_enabled_shuffle`                          |              `bool`              | `false` | If this option is set `true`, the evaluation order of neighbor solutions will be shuffled. Typically, this option is used with `move_preserve_rate` and `is_enabled_move_curtail`.                                                                                                                                                                                            |
| `tabu_search`<br/>`.is_enabled_move_curtail`                     |              `bool`              | `false` | If this option is set `true`, the number of evaluations of neighborhood solutions will be reduced by the value of 1 - `move_preserve_rate`.                                                                                                                                                                                                                                   |
| `tabu_search`<br/>`.is_enabled_automatic_break`                  |              `bool`              | `true`  | If this option is set `true`, a tabu search loop will be terminated automatically if the penalty coeffcients are not appropriate.                                                                                                                                                                                                                                             |
| `tabu_search`<br/>`.is_enabled_automatic_tabu_tenure_adjustment` |              `bool`              | `true`  | If this option is set `true`, the tabu tenure will be adjusted automatically based on the update frequency of decision variables.                                                                                                                                                                                                                                             |
| `tabu_search`<br/>`.ignore_tabu_if_augmented_incumbent`          |              `bool`              | `false` | If this option is set `true`, an unaccepted move will be specially adopted if the move updates augmented incumbent.                                                                                                                                                                                                                                                           |
| `tabu_search`<br/>`.ignore_tabu_if_feasible_incumbent`           |              `bool`              | `true`  | If this option is set `true`, an unaccepted move will be specially adopted if the move updates feasible incumbent.                                                                                                                                                                                                                                                            |
| `tabu_search`<br/>`.seed`                                        |              `int`               |   `1`   | Random seed.                                                                                                                                                                                                                                                                                                                                                                  |

